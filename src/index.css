:root {
  color-scheme: light;
  font-family: 'Segoe UI', Roboto, Helvetica, Arial, sans-serif;
}

* {
  box-sizing: border-box;
}

html,
body {
  margin: 0;
  height: 100%;
  overflow: hidden;
  background: #faf9f7;
  color: #1f1f1f;
}

body {
  display: flex;
  flex-direction: column;
}

#root {
  flex: 1;
  min-height: 0;
  display: flex;
  flex-direction: column;
}

.topbar {
  height: 48px;
  flex: 0 0 48px;
  border-bottom: 1px solid #e5e1da;
  display: flex;
  align-items: center;
  gap: 16px;
  padding: 0 16px;
  background: #fffdf9;
  position: sticky;
  top: 0;
  z-index: 10;
}

.topbar-title {
  font-weight: 600;
}

.topbar-button {
  height: 30px;
  padding: 0 10px;
  border: 1px solid #d8d2c7;
  border-radius: 8px;
  background: #fff;
  color: #2a2a2a;
  font-size: 12px;
  font-weight: 600;
  cursor: pointer;
}

.topbar-button:hover:not(:disabled) {
  background: #f6f2ea;
}

.topbar-button:disabled {
  opacity: 0.6;
  cursor: default;
}

.file-path {
  flex: 1;
  font-size: 13px;
  color: #5e5e5e;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.save-status {
  font-size: 12px;
  color: #555;
  min-width: 92px;
  text-align: right;
}

.workspace {
  flex: 1;
  min-height: 0;
  display: flex;
}

.workspace--split {
  display: grid;
  grid-template-columns: var(--workspace-split-columns, 3fr 8px 2fr);
}

.workspace-divider {
  width: 8px;
  min-width: 8px;
  cursor: col-resize;
  position: relative;
  background: transparent;
}

.pane {
  min-width: 0;
  min-height: 0;
  display: flex;
  flex-direction: column;
}

.terminal-pane {
  min-width: 280px;
  background: #fbf8f2;
}

.workspace-divider::before {
  content: '';
  position: absolute;
  top: 0;
  bottom: 0;
  left: 3px;
  width: 1px;
  background: #ece6da;
}

.workspace-divider:hover::before {
  background: #d4cab7;
}

.is-resizing-panes,
.is-resizing-panes * {
  cursor: col-resize !important;
  user-select: none !important;
}

.pane-title {
  height: 36px;
  display: flex;
  align-items: center;
  padding: 0 14px;
  border-bottom: 1px solid #ece8e0;
  font-size: 12px;
  color: #4d4d4d;
  font-weight: 600;
  text-transform: uppercase;
  letter-spacing: 0.04em;
  background: #fffdfa;
}

.editor {
  flex: 1;
  min-height: 0;
  overflow: auto;
  background: #fcfbf8;
}

.document-comments-layout {
  flex: 1;
  min-height: 0;
  position: relative;
  display: grid;
  grid-template-columns: minmax(0, 1fr) 280px;
  border-top: 0;
}

.editor .cm-editor {
  height: 100%;
}

.editor .cm-scroller {
  padding: 0;
  font-size: 18px;
  line-height: 1.7;
  /* Reserve scrollbar gutter space at all times so editor width stays stable
     and floating comment anchors do not shift when scrollbar visibility changes. */
  scrollbar-gutter: stable;
  /* Keep a consistent scrollbar width, but hide the thumb until scrolling. */
  scrollbar-width: thin;
  scrollbar-color: transparent transparent;
}

.editor .cm-scroller::-webkit-scrollbar {
  width: 8px;
}

.editor .cm-scroller::-webkit-scrollbar-track {
  background: transparent;
}

.editor .cm-scroller::-webkit-scrollbar-thumb {
  background: transparent;
  border-radius: 4px;
  transition: background 0.2s ease;
}

.editor.is-scrolling .cm-scroller::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.2);
}

/* Firefox: reveal only the thumb color while scrolling so gutter width stays
   constant and the editor/comment layout does not reflow. */
.editor.is-scrolling .cm-scroller {
  scrollbar-color: rgba(0, 0, 0, 0.2) transparent;
}

.editor .cm-content {
  max-width: 920px;
  caret-color: #1f1f1f;
}

.editor .cm-focused {
  outline: none;
}

.editor .cm-line.cm-live-heading-line {
  color: #1f1b14;
  font-weight: 650;
  letter-spacing: -0.015em;
}

.editor .cm-line.cm-live-heading-line--1 {
  font-size: 2.05em;
  line-height: 1.2;
  padding-top: 20px;
  padding-bottom: 8px;
}

.editor .cm-line.cm-live-heading-line--2 {
  font-size: 1.65em;
  line-height: 1.26;
  padding-top: 16px;
  padding-bottom: 6px;
}

.editor .cm-line.cm-live-heading-line--3 {
  font-size: 1.35em;
  line-height: 1.32;
  padding-top: 12px;
  padding-bottom: 4px;
}

.editor .cm-line.cm-live-heading-line--4 {
  font-size: 1.15em;
  line-height: 1.4;
  padding-top: 10px;
  padding-bottom: 3px;
}

.editor .cm-line.cm-live-heading-line--5 {
  font-size: 1.02em;
  line-height: 1.5;
  padding-top: 8px;
  padding-bottom: 2px;
}

.editor .cm-line.cm-live-heading-line--6 {
  font-size: 0.94em;
  line-height: 1.55;
  padding-top: 8px;
  padding-bottom: 2px;
  letter-spacing: 0.01em;
  text-transform: uppercase;
  color: #5d574d;
}

.editor .cm-line.cm-live-quote-line {
  border-left: 1px solid #9a9488;
  padding-left: 18px;
  margin-left: 18px;
  color: #3f3d38;
  font-style: italic;
}

.editor .cm-line {
  padding-left: 12px;
}

.editor .cm-inline-comment-range {
  background: rgba(255, 223, 127, 0.45);
  border-radius: 3px;
  box-shadow: inset 0 -1px 0 rgba(212, 155, 24, 0.35);
}

.inline-comments-sidebar {
  min-width: 0;
  min-height: 0;
  overflow: hidden;
  border-left: none;
  background: rgb(252, 251, 248);
  padding: 10px;
  display: flex;
  flex-direction: column;
  gap: 10px;
  position: relative;
}

.inline-comments-sidebar--floating {
  gap: 0;
}

.inline-comment-selection-action {
  position: absolute;
  z-index: 5;
  min-width: 92px;
  height: 34px;
  padding: 0 12px;
  border: 1px solid #d6cebf;
  border-radius: 999px;
  background: rgba(255, 253, 250, 0.98);
  box-shadow:
    0 8px 20px rgba(31, 27, 20, 0.08),
    0 2px 6px rgba(31, 27, 20, 0.08);
  color: #2f2a22;
  font-size: 13px;
  font-weight: 600;
  letter-spacing: 0.01em;
  cursor: pointer;
}

.inline-comment-selection-action:hover {
  background: #fff;
  border-color: #cdbf9e;
}

.inline-comment-selection-action:focus-visible {
  outline: 2px solid rgba(201, 141, 22, 0.2);
  outline-offset: 2px;
}

.inline-comments-empty-state {
  position: relative;
  z-index: 1;
  padding: 10px;
  border: 1px dashed #d9d1c2;
  border-radius: 10px;
  background: #fffefb;
  color: #6d665a;
  font-size: 12px;
  line-height: 1.45;
}

.inline-comments-floating-layer {
  position: absolute;
  inset: 0 10px 10px;
}

.inline-comment-floating-slot {
  position: absolute;
  left: 0;
  right: 0;
}

.inline-comment-card {
  position: relative;
  display: block;
  padding: 0;
}

.inline-comment-card-delete-button {
  position: absolute;
  top: 8px;
  right: 8px;
  z-index: 1;
  width: 28px;
  height: 28px;
  border: 1px solid #e0d7c8;
  border-radius: 8px;
  background: #fffdfa;
  color: #70523a;
  cursor: pointer;
  line-height: 1;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 14px;
  opacity: 0;
  pointer-events: none;
  transform: translateY(-3px);
  transition:
    opacity 120ms ease,
    transform 120ms ease,
    background-color 120ms ease,
    border-color 120ms ease,
    color 120ms ease;
}

.inline-comment-card:hover .inline-comment-card-delete-button,
.inline-comment-card:focus-within .inline-comment-card-delete-button {
  opacity: 1;
  pointer-events: auto;
  transform: translateY(0);
}

.inline-comment-card-delete-button:hover {
  background: #fff2ee;
  border-color: #d7b7ac;
  color: #8a2f1f;
}

.inline-comment-card-delete-button:focus-visible {
  outline: 2px solid rgba(138, 47, 31, 0.18);
  outline-offset: 1px;
}

.inline-comment-card-input {
  width: 100%;
  min-height: calc(1.45em + 28px);
  height: auto;
  resize: none;
  overflow-y: hidden;
  border: 1px solid #d6cebf;
  border-radius: 12px;
  padding: 12px 44px 12px 14px;
  font: inherit;
  font-size: 16px;
  line-height: 1.45;
  color: #2d2b26;
  background: rgb(243, 246, 252);
  box-shadow:
    0 6px 18px rgba(31, 27, 20, 0.04),
    0 1px 3px rgba(31, 27, 20, 0.05);
  transition:
    border-color 120ms ease,
    box-shadow 120ms ease,
    background-color 120ms ease;
}

.inline-comment-card-input:focus {
  outline: 2px solid rgba(201, 141, 22, 0.18);
  border-color: #c98d16;
  background: #fff;
  box-shadow:
    0 10px 26px rgba(31, 27, 20, 0.08),
    0 2px 6px rgba(31, 27, 20, 0.06);
}

.inline-comment-card:not(:focus-within):hover .inline-comment-card-input {
  background: rgb(235, 240, 249);
}

.terminal-warning-banner {
  margin: 12px;
  padding: 10px 12px;
  border: 1px solid #e0d7c5;
  border-radius: 10px;
  background: #fff6e8;
  color: #5f4521;
  font-size: 12px;
  line-height: 1.4;
}

.terminal-metadata-grid {
  margin: 0 12px 12px;
  padding: 12px;
  border: 1px solid #e8e2d7;
  border-radius: 10px;
  background: #fffdf8;
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 10px 14px;
}

.terminal-metadata-grid > div {
  min-width: 0;
  display: flex;
  flex-direction: column;
  gap: 4px;
}

.terminal-cwd-editor-cell {
  grid-column: 1 / -1;
}

.terminal-metadata-label {
  font-size: 11px;
  text-transform: uppercase;
  letter-spacing: 0.04em;
  color: #7a7468;
  font-weight: 600;
}

.terminal-metadata-value {
  font-size: 12px;
  color: #292824;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

.terminal-output {
  flex: 1;
  min-height: 0;
  min-width: 0;
  margin: 0 12px 12px;
  padding: 8px;
  border: 1px solid #e1dbce;
  border-radius: 12px;
  background: #151515;
  color: #e6e3da;
  overflow: hidden;
}

.terminal-output--pane {
  margin-top: 0;
  margin-bottom: 8px;
}

.terminal-xterm-host {
  height: 100%;
  width: 100%;
  overflow: hidden;
}

.terminal-xterm-host .xterm {
  height: 100%;
  width: 100%;
}

/* Hide the native scrollbar track while keeping scroll functional via mouse
   wheel and keyboard. This sidesteps the xterm.js issue where the FitAddon
   doesn't account for the native scrollbar width, causing text to render
   underneath the scrollbar. */
.terminal-xterm-host .xterm-viewport {
  border-radius: 8px;
  scrollbar-width: none;
}

.terminal-xterm-host .xterm-viewport::-webkit-scrollbar {
  display: none;
}

.terminal-input {
  flex: 1;
  min-width: 0;
  height: 38px;
  border: 1px solid #d8d2c7;
  border-radius: 10px;
  padding: 0 12px;
  font-size: 13px;
  background: #fff;
  color: #1f1f1f;
}

.terminal-input:disabled {
  background: #f4f1eb;
  color: #807b72;
}

.terminal-cwd-input {
  height: 34px;
}

.terminal-preset-bar {
  margin: 0 12px 12px;
  display: grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 8px;
}

.terminal-preset-button {
  min-height: 34px;
  border: 1px solid #dacfbf;
  border-radius: 10px;
  background: #fffdfa;
  color: #3a3126;
  font-size: 12px;
  font-weight: 600;
  letter-spacing: 0.01em;
  padding: 8px 10px;
  cursor: pointer;
  transition:
    background-color 120ms ease,
    border-color 120ms ease,
    color 120ms ease,
    box-shadow 120ms ease;
}

.terminal-preset-button:hover:not(:disabled) {
  background: #fff6e8;
  border-color: #ccb895;
  box-shadow: 0 2px 8px rgba(95, 69, 33, 0.08);
}

.terminal-preset-button:focus-visible {
  outline: 2px solid rgba(201, 141, 22, 0.18);
  outline-offset: 2px;
}

.terminal-preset-button:disabled {
  cursor: not-allowed;
  background: #f3efe7;
  color: #8a8377;
  border-color: #e1dbce;
}

@media (max-width: 900px) {
  .workspace--split {
    display: flex;
    flex-direction: column;
  }

  .workspace-divider {
    width: auto;
    height: 1px;
    min-width: 0;
    cursor: default;
    background: #ece6da;
  }

  .terminal-pane {
    min-width: 0;
    min-height: 260px;
  }

  .workspace-divider::before {
    display: none;
  }

  .terminal-metadata-grid {
    grid-template-columns: 1fr;
  }

  .terminal-preset-bar {
    grid-template-columns: 1fr;
  }
}
